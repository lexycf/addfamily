var func={node:{conContent:'[node-type="con-content"]',name:"#name",age:"#age",phone:"#phone",ageList:".ageList",ageData:ageData,j_ageBox:"#j_ageBox",userAgeParam:"",equitiesList:".equitiesList",nameStatus:!1,ageStatus:!1,phoneStatus:!1,subBtn:"#subBtn"},bindEvent:function(){$(func.node.conContent).delegate(func.node.name,"focus",function(){$(this).parent().siblings(".errBox").html("")}).delegate(func.node.name,"blur",function(){var e=$(this).val();""==e?($(this).parent().siblings(".errBox").html("姓名不能为空"),func.node.nameStatus=!1):func.node.nameStatus=!0}).delegate(func.node.phone,"focus",function(){$(this).parent().siblings(".errBox").html("")}).delegate(func.node.age,"focus",function(){func.triggerage($(this),$(func.node.j_ageBox))}).delegate(func.node.subBtn,"click",function(){var e=($(func.node.age).val(),$(func.node.phone).val());if(!func.node.nameStatus)return $(func.node.name).parent().siblings(".errBox").html("请输入姓名"),!1;if(""!=e){var n=/^1[3-9][0-9]\d{8}$/;if(!n.test(e))return $(func.node.phone).parent().siblings(".errBox").html("请输入正确的手机号码"),!1}})},getAgeList:function(){for(var e=func.node.ageData,n="",a="",t=0;t<e.length;t++)a=e[t],n+='<li class="j_ageli" data-showTxt="'+a.showTxt+'" data-birthYear="'+a.birthYear+'">'+a.val+"</li>";$(func.node.ageList).html(n)},triggerage:function(e,n){var a=n.html(),t=new layer({content:a,readyCallback:function(n){n.find(".j_ageli").click(function(){var n=$(this).attr("data-showTxt"),a=$(this).attr("data-birthYear"),i=$(this).index();$(func.node.ageList).find("li").eq(i).addClass("active").siblings().removeClass("active"),console.log(i),e.val(n),func.node.userAgeParam=a,func.equitiescheck(),t.close()})}})},equitiescheck:function(){var e=new Date,n=e.getFullYear(),a=n-parseInt(func.node.userAgeParam),t=$(func.node.equitiesList),i="",s="",o=t.find("li");t.find(".fangai").hide().siblings().show(),t.find("li").removeClass("greyTxt");for(var r=0;r<o.length;r++)i=parseInt(o.eq(r).data("minage")),s=parseInt(o.eq(r).data("maxage")),sicktype=o.eq(r).data("sicktype"),a>=i&&a<=s?o.eq(r).removeClass("greyTxt"):o.eq(r).addClass("greyTxt");a<=60?($(".fangai").hide().siblings(".dabing").show(),t.find('li[data-sicktype="yiwai"]').hasClass("greyTxt")):t.find(".fangai").show().removeClass("greyTxt").siblings(".dabing").hide()},init:function(){func.bindEvent(),func.paramList=[],func.getAgeList()}};func.init();